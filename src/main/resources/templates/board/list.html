<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<header th:replace="~{fragments/base :: head}"></header>
	<style>
		td,
		th {
			text-align: center;
		}

		/* 전체 페이지에 적용되는 기본 스타일 */
		body {
			font-family: 'Arial', sans-serif;
			background-color: #f9f9f9;
			margin: 0;
			padding: 20px;
		}

		/* 게시글 목록 컨테이너 스타일 */
		.posts-container {
			display: flex;
			flex-direction: column;
			gap: 20px;
		}

		/* 개별 게시글 항목 스타일 */
		.post-item {
			display: flex;
			background-color: white;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			border-radius: 10px;
			overflow: hidden;
		}

		.post-image {
			/* 이미지 크기 및 배경 설정 */
			width: 150px;
			height: 150px;
			background-color: #ddd;
			/* 예시용 색상 */
			background-size: cover;
			background-position: center;
		}

		.post-content {
			padding: 15px;
			flex-grow: 1;
		}

		.post-title {
			margin: 0;
			color: #333;
			font-size: 18px;
		}

		.post-info {
			display: flex;
			gap: 10px;
			font-size: 14px;
			color: #666;
			margin: 10px 0;
		}

		.post-excerpt {
			margin: 0;
			color: #777;
			font-size: 14px;
		}
	</style>
	<script th:inline="javascript">
		function search() {
			const field = $('#field').val();
			const query = $('#query').val();
			const uri = '/food/board/list?p=' + [[${ session.currentBoardPage }]] + '&f=' + field + '&q=' + query;
			location.href = encodeURI(uri);
		}
	</script>
</head>

<body>
	<div th:insert="~{fragments/base :: top}"></div>

	<div class="container" style="margin-top:80px">
        <!-- 게시글 목록 컨테이너 -->
        <div class="posts-container">
            <!-- 반복되는 게시글 항목 -->
            <div class="post-item">
                <div class="post-image">
                    <!-- 이미지 삽입 -->
                </div>
                <div class="post-content">
                    <h3 class="post-title">즐겨찾기한 게시물</h3>
                    <div class="post-info">
                        <span><option value="uname" ${field eq 'uname' ? 'selected' : '' }>글쓴이</option></span>
                        <span>조회수</span>
                        <span>좋아요</span>
                    </div>
                    <p class="post-excerpt">즐겨찾기 게시물 내용</p>
                </div>
            </div>
            <!-- 게시글 항목 반복 끝 -->
        </div>
    </div>


	<div class="container" style="margin-top:80px">
		<div class="row">
			<div class="col-3">
				<aside th:replace="~{fragments/base :: aside}"></aside>
			</div>

			<div class="col-9">
				<main id="main">
					<table class="table table-sm table-borderless">
						<tr>
							<td style="width: 52%; text-align: left">
								<h3><strong class="me-5">게시글 목록</strong>
									<span style="font-size:16px"><a href="/food/board/insert"><i
												class="fa-solid fa-pen-to-square"></i> 글 쓰기</a></span>
								</h3>
							</td>
							<td style="width: 16%">
								<select class="form-control" id="field">
									<option value="title" ${field eq 'title' ? 'selected' : '' }>제목</option>
									<option value="content" ${field eq 'content' ? 'selected' : '' }>본문</option>
									<option value="uname" ${field eq 'uname' ? 'selected' : '' }>글쓴이</option>
								</select>
							</td>
							<td style="width: 24%">
								<span th:unless="${query}">
									<input class="form-control" type="text" id="query" placeholder="검색할 내용">
								</span>
								<span th:if="${query}">
									<input class="form-control" type="text" id="query" th:value="${query}">
								</span>
							</td>
							<td style="width: 8%">
								<button class="btn btn-outline-primary" onclick="search()">검색</button>
							</td>
						</tr>
					</table>
					<hr>
					<table class="table">
						<tr>
							<th style="width: 8%">ID</th>
							<th style="width: 42%">제목</th>
							<th style="width: 14%">글쓴이</th>
							<th style="width: 16%">수정시간</th>
							<th style="width: 10%">조회수</th>
							<th style="width: 10%">좋아요</th>
						</tr>
						<tr th:each="board: ${boardList}">
							<td>[[${board.bid}]]</td>
							<td>
								<a th:href="@{/board/detail/{x}/{y}(x=${board.bid},y=${board.uid})}">[[${board.title}]]</a>
								<span th:if="${board.replyCount ge 1}">
									<span class="text-danger">&#91;[[${board.replyCount}]]&#93;</span>
								</span>
							</td>
							<td>[[${board.uname}]]</td>
							<td>[[${#temporals.format(board.modTime, 'yy-MM-dd HH:mm')}]]</td>
							<td>[[${board.viewCount}]]</td>
							<td>[[${board.likeCount}]]</td>
						</tr>
					</table>

					<!-- pagination -->
					<ul class="pagination justify-content-center mt-4">
						<span th:if="${session.currentBoardPage gt 10}">
							<li class="page-item"><a class="page-link"
									th:href="@{/board/list(p=${startPage-1},f=${field},q=${query})}"><i
										class="fa-solid fa-less-than"></i></a></li>
						</span>
						<span th:if="${session.currentBoardPage le 10}">
							<li class="page-item"><a class="page-link" href="#"><i
										class="fa-solid fa-less-than"></i></a></li>
						</span>
						<span th:each="page: ${pageList}">
							<!-- <li class="page-item" th:classappend="${session.currentBoardPage eq page ? 'active' : ''}">
								<span th:if="${session.currentBoardPage eq page}">
									<a class="page-link" href="#">[[${page}]]</a>
								</span>
								<span th:if="${session.currentBoardPage ne page}">
									<a class="page-link" th:href="@{/board/list(p=${page},f=${field},q=${query})}">[[${page}]]</a>
								</span>
							</li> -->
							<span th:switch="${page}">
								<th:block th:case="${session.currentBoardPage}">
									<li class="page-item active">
										<a class="page-link" href="#">[[${page}]]</a>
									</li>
								</th:block>
								<th:block th:case="*">
									<li class="page-item">
										<a class="page-link"
											th:href="@{/board/list(p=${page},f=${field},q=${query})}">[[${page}]]</a>
									</li>
								</th:block>
							</span>
						</span>
						<span th:if="${totalPages gt endPage}">
							<li class="page-item"><a class="page-link"
									th:href="@{/board/list(p=${endPage+1},f=${field},q=${query})}"><i
										class="fa-solid fa-greater-than"></i></a></li>
						</span>
						<span th:if="${totalPages eq endPage}">
							<li class="page-item"><a class="page-link" href="#"><i
										class="fa-solid fa-greater-than"></i></a></li>
						</span>
					</ul>
				</main>
			</div>
		</div>
	</div>

	<footer th:replace="~{fragments/base :: bottom}"></footer>
</body>

</html>